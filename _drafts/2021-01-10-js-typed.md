---
layout: post
title: 前端打字机效果的 N 种实现
categories: JavaScript
description: 前端打字机效果的 N 种实现
keywords: JS, 前端, JavaScript, CSS, 打字机效果
---

## 什么是打字机效果

![Typed.js](https://upload-images.jianshu.io/upload_images/5318700-5d0964461b39ffdf.gif)

## 实现 - setTimeout

typed2.html
- [5行代码带你实现一个js的打字效果](https://zhuanlan.zhihu.com/p/94619915)

```js
(function () {
  const dom = document.getElementById('content')
  const data = '最简单的打字效果代码'.split('')
  let index = 0
  function writing() {
    if (index < data.length) {
      dom.innerHTML += data[index]
      setTimeout(writing, 200, ++index)
    }
  }
  writing()
})();
```

## 实现 —— MDN setInterval()

typed1.html（太长了）
typed2.html
- [打字机效果](https://developer.mozilla.org/zh-CN/docs/Web/API/Window/setInterval#%E4%BE%8B%EF%BC%93%EF%BC%9A%E6%89%93%E5%AD%97%E6%9C%BA%E6%95%88%E6%9E%9C)

## 实现 —— requestAnimationFrame

typed5.html

&emsp;&emsp;与setTimeout相比，requestAnimationFrame最大的优势是由系统来决定回调函数的执行时机。具体一点讲，如果屏幕刷新率是60Hz,那么回调函数就每16.7ms被执行一次，如果刷新率是75Hz，那么这个时间间隔就变成了1000/75=13.3ms，换句话说就是，requestAnimationFrame的步伐跟着系统的刷新步伐走。它能保证回调函数在屏幕每一次的刷新间隔中只被执行一次，这样就不会引起丢帧现象，也不会导致动画出现卡顿的问题。

&emsp;&emsp;requestAnimationFrame还有以下两个优势：

- CPU节能：使用setTimeout实现的动画，当页面被隐藏或最小化时，setTimeout 仍然在后台执行动画任务，由于此时页面处于不可见或不可用状态，刷新动画是没有意义的，完全是浪费CPU资源。而requestAnimationFrame则完全不同，当页面处理未激活的状态下，该页面的屏幕刷新任务也会被系统暂停，因此跟着系统步伐走的requestAnimationFrame也会停止渲染，当页面被激活时，动画就从上次停留的地方继续执行，有效节省了CPU开销。

- 函数节流：在高频率事件(resize,scroll等)中，为了防止在一个刷新间隔内发生多次函数执行，使用requestAnimationFrame可保证每个刷新间隔内，函数只被执行一次，这样既能保证流畅性，也能更好的节省函数执行的开销。一个刷新间隔内函数执行多次时没有意义的，因为显示器每16.7ms刷新一次，多次绘制并不会在屏幕上体现出来。

[requestAnimationFrame 知多少？](https://www.cnblogs.com/onepixel/p/7078617.html){:target='_blank'}

## 实现 - CSS3
typed4.html

原理：
- 利用格子大小容纳字体 超出的overflow
- white-space: nowrap将字放在一行上
- 在关键帧 border-color: transparent 将边框透明化 右边框就像打字符号一样了

- [用css3实现打字机效果](https://blog.csdn.net/shenshuai00/article/details/108964144)
- [CSS 实现打字效果](https://www.cnblogs.com/xieyulin/p/7085766.html)

[animation中的steps()逐帧动画](https://www.cnblogs.com/BATAKK/p/5301819.html){:target='_blank'}

## 实现 - Typed.js

typed3.html
- [Typed.js](https://mattboldt.com/demos/typed-js/){:target='_blank'}

- [JS插件 —— 酷炫的打字机效果: Typed.js](https://www.jianshu.com/p/37ff22decc62)

## 实现 —— 其他

- [打字机](http://www.bootstrapmb.com/tag/daziji)